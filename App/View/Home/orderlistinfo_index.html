<%=include indexheader_index.html%>
<script>
    var orderlistinfoJSON = <%- JSON.stringify(orderlistinfo)%>;
</script>
<style>
    table{background: #fff;}
    p{margin: 0;}
    .nav-tabs{border: none;}
    .nav-tabs>li{width: 33.3333%;font-size: 16px;}
    .nav-tabs>li>a{text-align: center;padding:14px 15px;border-radius:0;margin-right:0; }
    .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover{border: none;background-color:#449d44;color: #fff;}
    .state33{background: #428bca;}
    .state55{background: #5cb85c;}
    .state10{background: #5bc0de;}
    .state30{background: #f0ad4e;}
    .state40{background: #d9534f;}
    .state44{background: #000066;}
    .state60{background: #000066;}
</style>
    <br>
<div id="orderlistinfo" v-cloak>
    <table class="table ">
        <tr>
            <td><h4><i class="glyphicon glyphicon-time"></i> {{state | state}}<small>  共<%=listcount%>份早餐</small></h4></td>
        </tr>
    </table>
    <table class="table">
        <thead v-repeat="info">
        <tr>
            <td colspan="4">订单号：<kbd>{{orderid}}</kbd></td>
            <td class="text-danger">{{pricetotal | currency '¥'}}</td>
        </tr>
        <tr>
            <td colspan="5">联系人：{{receiveuser}}</td>
        </tr>
        <tr>
            <td colspan="5">配送费：{{expressprice | currency '¥'}}</td>
        </tr>
        <tr>
            <td colspan="5">{{addressKey}} {{address}}</td>
        </tr>
        <tr>
            <td colspan="5" class="text-muted">下单时间：{{ordertime}}</td>
        </tr>
        </thead>

        <tbody>
        <tr class="active">
            <th colspan="2">名称</th>
            <th>量</th>
            <th>合计</th>
            <th>状态</th>
        </tr>
        <tr v-repeat="list">
            <td colspan="2">{{productname}}<p class="text-muted">{{time}}</p></td>
            <td>×{{productnum}}</td>
            <td class="text-danger">{{productprice | currency '¥'}}</td>
            <td><span class="label label-warning state{{productstatenum}}">{{productstate}}</span></td>
        </tr>
        <tr>
            <td colspan="5" align="right">
                <a type="button" href="tel:15117909848" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-headphones"></i> 联系客服</a>
                <button type="button" class="btn btn-default btn-sm"><i class="glyphicon glyphicon-pencil"></i> 投诉建议</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<script>
    var orderlistInfo = new Vue({
        el:'#orderlistinfo',
        data:{
            info:orderlistinfoJSON.orderdata,
            list:orderlistinfoJSON.listdata,
            state:orderlistinfoJSON.orderdata[0].nowstate
        },
        filters:{
            state:function(value){
                switch (value){
                    case -1:
                        return "取消订单订单";
                    break;
                    case 0:
                        return "已完成订单";
                    break;
                    default :
                        return "订单进行中";
                }
            }
        }
    });
</script>
</body>
</html>
